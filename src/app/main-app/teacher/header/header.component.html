<header
  class="items-center gradient-surface justify-between whitespace-nowrap border-b border-solid border-secondary sm:px-6 p-3 shadow-sm sticky top-0 z-10 flex h-16 max-sm:h-14"
>
  <svg
    (click)="goBack()"
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="0 0 24 24"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    class="lucide lucide-arrow-big-left-icon lucide-arrow-big-left sm:hidden"
  >
    <path
      d="M13 9a1 1 0 0 1-1-1V5.061a1 1 0 0 0-1.811-.75l-6.835 6.836a1.207 1.207 0 0 0 0 1.707l6.835 6.835a1 1 0 0 0 1.811-.75V16a1 1 0 0 1 1-1h6a1 1 0 0 0 1-1v-4a1 1 0 0 0-1-1z"
    />
  </svg>
  <div class="flex items-center gap-4">
    <a class="flex items-center gap-2" href="#">
      <svg
        class="max-sm:hidden h-6 w-6 text-primary"
        fill="none"
        stroke="currentColor"
        stroke-linecap="round"
        stroke-linejoin="round"
        stroke-width="2"
        viewBox="0 0 24 24"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M12 3H21C21.5523 3 22 3.44772 22 4V20C22 20.5523 21.5523 21 21 21H3C2.44772 21 2 20.5523 2 20V4C2 3.44772 2.44772 3 3 3H5"
        ></path>
        <path d="M16 2V4"></path>
        <path d="M8 2V4"></path>
        <path d="M7 12L9 14L13 10"></path>
        <path d="M7 17L9 19L13 15"></path>
      </svg>
      <span
        class="text-xl max-sm:text-[clamp(1rem,6.5vw,2rem)] font-bold tracking-wide text-foreground max-sm:ml-4 hidden max-sm:block"
      >
        {{ pageTitle }}
      </span>
      <span
        class="text-2xl font-bold tracking-wide text-foreground max-sm:ml-4 max-sm:hidden"
      >
        Quiz Mastro
      </span>
    </a>
  </div>
  <div class="flex items-center gap-3">
    <nav class="hidden sm:flex items-center gap-2 text-sm font-medium">
      <a
        class="text-muted-foreground hover:text-primary hover:border-b-2 hover:border-primary border-b-2 hover:shadow-soft border-transparent transition-colors h-16 flex items-center px-3 mt-1"
        routerLink="/teacher-dashboard"
        routerLinkActive="text-primary btn-active-app  font-medium pointer-events-none"
        >Dashboard</a
      >
      <a
        class="text-muted-foreground hover:text-primary hover:border-b-2 hover:border-primary border-b-2 hover:shadow-soft border-transparent transition-colors h-16 flex items-center px-3 mt-1"
        routerLink="/create-quiz"
        routerLinkActive="text-primary btn-active-app  font-medium pointer-events-none"
        >Create</a
      >
      <a
        class="text-muted-foreground hover:text-primary hover:border-b-2 hover:border-primary border-b-2 hover:shadow-soft border-transparent transition-colors h-16 flex items-center px-3 mt-1"
        routerLink="/student-to-teacher"
        routerLinkActive="text-primary btn-active-app  font-medium pointer-events-none"
        >Student</a
      >
    </nav>
    <div class="flex items-center gap-4">
      <brn-popover>
        <!-- Teacher/Admin button -->
        <button
          brnPopoverTrigger
          class="flex items-center gap-2 rounded-full border border-gray-200 p-1 pr-3 text-sm font-medium hover:bg-gray-100 text-primary transition-all data-[state=open]:ring-2 data-[state=open]:ring-blue-500 cursor-pointer"
        >
          <img
            alt="User Avatar"
            class="h-8 w-8 rounded-full"
            [src]="getAvatar(currentUser)"
          />
          <span class="max-sm:hidden">{{ firstName }}</span>
          <svg
            class="h-4 w-4 text-muted-foreground"
            fill="none"
            stroke="currentColor"
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            viewBox="0 0 24 24"
            xmlns="http://www.w3.org/2000/svg"
          >
            <polyline points="6 9 12 15 18 9"></polyline>
          </svg>
        </button>

        <!-- Popover content -->
        <div
          hlmPopoverContent
          *brnPopoverContent="let ctx"
          class="min-h-40 w-95 mr-5 max-sm:mr-2 mt-3.5 space-y-2 max-sm:w-45 relative"
        >
          <div
            class="absolute -top-[8.8px] right-4 max-sm:right-3.7 w-4 h-4 rotate-45 bg-popover border-l border-t border-border"
          ></div>

          <div class="flex gap-5 max-sm:flex-col">
            <div class="w-1/2 aspect-square max-sm:w-full">
              <img
                class="h-full max-sm:object-contain w-full object-cover object-center rounded-md"
                [src]="getAvatar(currentUser)"
                alt="Profile picture"
              />
            </div>
            <div class="w-1/2 max-sm:w-full">
              <div class="mb-2">
                <p class="font-medium">{{ currentUser?.name }}</p>
                <p class="text-sm text-gray-500">Teacher</p>
              </div>
              <div class="border-b-2 border-border"></div>

              <div class="flex flex-col text-left mt-2">
                <button
                  hlmBtn
                  variant="ghost"
                  class="w-full justify-start hover:bg-accent/10 px-1"
                >
                  Profile
                </button>

                <button
                  hlmBtn
                  variant="ghost"
                  class="w-full justify-start hover:bg-accent/10 px-1"
                >
                  Settings
                </button>

                <button
                  hlmBtn
                  variant="ghost"
                  (click)="logout()"
                  class="w-full justify-start text-red-600 hover:bg-red-50 px-1"
                >
                  Sign Out
                </button>
              </div>
            </div>
          </div>
        </div>
      </brn-popover>
    </div>
  </div>
</header>

<aside
  class="fixed bottom-0 z-50 w-full bg-white flex items-center px-3 justify-between shadow-sidebar h-12.5 sm:hidden"
>
  <nav class="w-full mt-0.5 flex justify-between items-center">
    <a
      routerLink="/teacher-dashboard"
      routerLinkActive="text-primary"
      class="relative group flex items-center flex-col rounded-main text-muted-foreground font-light sidebar-font-scale transition-transform active:scale-95 py-1 px-2"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="28"
        height="28"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-house-icon lucide-house"
      >
        <path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8" />
        <path
          d="M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"
        />
      </svg>
      <span class="text-[12px]">Home</span>
    </a>
    <a
      routerLink="/create-quiz"
      routerLinkActive="text-primary"
      class="relative group flex items-center flex-col rounded-main text-muted-foreground font-light sidebar-font-scale transition-transform active:scale-95 py-1 px-2"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="28"
        height="28"
        fill="none"
        viewBox="0 0 24 24"
        stroke="currentColor"
        stroke-width="2"
      >
        <path
          stroke-linecap="round"
          stroke-linejoin="round"
          d="M3 3h7v7H3V3zM14 3h7v4h-7V3zM14 10h7v11h-7V10zM3 14h7v7H3v-7z"
        />
      </svg>
      <span class="text-[12px]">Create Quiz</span>
    </a>
    <a
      routerLink="/student-to-teacher"
      routerLinkActive="text-primary"
      class="relative group flex items-center flex-col rounded-main text-muted-foreground font-light sidebar-font-scale transition-transform active:scale-95 py-1 px-2"
    >
      <svg
        xmlns="http://www.w3.org/2000/svg"
        width="30"
        height="30"
        viewBox="0 0 24 24"
        fill="none"
        stroke="currentColor"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="lucide lucide-graduation-cap-icon lucide-graduation-cap"
      >
        <path
          d="M21.42 10.922a1 1 0 0 0-.019-1.838L12.83 5.18a2 2 0 0 0-1.66 0L2.6 9.08a1 1 0 0 0 0 1.832l8.57 3.908a2 2 0 0 0 1.66 0z"
        />
        <path d="M22 10v6" />
        <path d="M6 12.5V16a6 3 0 0 0 12 0v-3.5" />
      </svg>
      <span class="text-[12px]">Students</span>
    </a>
  </nav>
</aside>
