<app-header></app-header>
<section
  class="p-8 max-sm:p-4 bg-background max-sm:mb-[3rem] min-h-[calc(100dvh-4rem)] max-sm:min-h-[calc(100dvh-3.5rem)]"
>
  <div class="lg:max-w-[90%] px-5 py-10 sm:mt-5 mx-auto">
    <!-- Header -->
    <div class="text-center mb-8">
      <h1 class="text-3xl font-bold text-foreground mb-4">
        My Connected Teachers
      </h1>
      <p class="text-muted-foreground">
        These are the teachers you are connected to and can contact for help.
      </p>
    </div>

    <!-- Connected Teachers List -->
    <div
      *ngIf="connectedTeachers.length > 0; else noTeachers"
      class="grid gap-6 md:grid-cols-2 lg:grid-cols-3"
    >
      <div
        *ngFor="let teacher of connectedTeachers"
        class="bg-white rounded-lg shadow-md p-6 border border-gray-200 hover:shadow-lg transition-shadow"
      >
        <div class="flex items-center space-x-4 mb-4">
          <img
            [src]="getAvatar(teacher)"
            [alt]="teacher.name"
            class="w-15 h-15 rounded-full object-cover"
          />
          <div>
            <h3 class="text-lg font-semibold text-foreground">
              {{ teacher.name }}
            </h3>
            <p class="text-sm text-muted-foreground">{{ teacher.subject }}</p>
          </div>
        </div>

        <div class="space-y-2 text-sm text-muted-foreground">
          <div class="flex items-center">
            <svg
              class="w-4 h-4 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 8l7.89 4.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
              ></path>
            </svg>
            <span>{{ teacher.email }}</span>
          </div>
          <div class="flex items-center">
            <svg
              class="w-4 h-4 mr-2"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
              ></path>
            </svg>
            <span>{{ teacher.phone ? teacher.phone : "No phone Added" }}</span>
          </div>
        </div>

        <div class="mt-4 pt-4 border-t border-gray-200">
          <button
            class="w-full bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 transition-colors"
            (click)="contactTeacher(teacher)"
          >
            Contact Teacher
          </button>
        </div>
      </div>
    </div>

    <!-- No Teachers Message -->
    <ng-template #noTeachers>
      <div class="text-center py-12">
        <div
          class="mx-auto w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mb-4"
        >
          <svg
            class="w-12 h-12 text-gray-400"
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"
            ></path>
          </svg>
        </div>
        <h3 class="text-lg font-medium text-foreground mb-2">
          No Connected Teachers
        </h3>
        <p class="text-muted-foreground mb-4">
          You don't have any connected teachers yet. Please contact your
          administrator to get connected with teachers.
        </p>
        <button
          class="bg-primary text-primary-foreground py-2 px-4 rounded-md hover:bg-primary/90 transition-colors"
          (click)="refreshConnections()"
        >
          Refresh Connections
        </button>
      </div>
    </ng-template>
  </div>
</section>
